#!/bin/bash
# Nexterm - Advanced Terminal System Information Tool
# Main router/executor

set -euo pipefail

# Get script directory
SCRIPT_DIR="$(cd "$(dirname "">${BASH_SOURCE[0]}")" && pwd)"

# Source configuration and core modules
source "${SCRIPT_DIR}/core/config.sh"
source "${SCRIPT_DIR}/core/logger.sh"
source "${SCRIPT_DIR}/core/colors.sh"

# Show usage information
usage() {
    echo "Nexterm - Terminal System Information Tool"
    echo ""
    echo "Usage: nexterm [COMMAND] [OPTIONS]"
    echo ""
    echo "Commands:"
    echo "  sysinfo    Display system information"
    echo "  cpu        Display CPU information"
    echo "  ram        Display RAM information"
    echo "  disk       Display disk information"
    echo "  network    Display network information"
    echo "  help       Show this help message"
    echo ""
}

# Main entry point
main() {
    local command="${1:-help}"
    
    case "${command}" in
        sysinfo)
            source "${SCRIPT_DIR}/modules/sysinfo.sh"
            show_sysinfo
            ;;
        cpu)
            source "${SCRIPT_DIR}/modules/cpu.sh"
            show_cpu_info
            ;;
        ram)
            source "${SCRIPT_DIR}/modules/ram.sh"
            show_ram_info
            ;;
        disk)
            source "${SCRIPT_DIR}/modules/disk.sh"
            show_disk_info
            ;;
        network)
            source "${SCRIPT_DIR}/modules/network.sh"
            show_network_info
            ;;
        help|--help|-h)
            usage
            ;;
        *)
            log_error "Unknown command: ${command}"
            usage
            exit 1
            ;;
    esac
}

# Run main function
main "$@"